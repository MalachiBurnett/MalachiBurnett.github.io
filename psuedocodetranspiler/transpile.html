<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AQA Pseudocode to Python</title>
    <script src="https://cdn.jsdelivr.net/npm/skulpt@1.1.0/dist/skulpt.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/skulpt@1.1.0/dist/skulpt-stdlib.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        textarea {
            width: 100%;
            height: 150px;
            margin-bottom: 10px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        pre {
            background-color: #f4f4f4;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>AQA Pseudocode to Python Transpiler</h1>
    <p>Enter AQA Pseudocode below:</p>
    <textarea id="pseudocodeInput" placeholder="Enter your AQA pseudocode here..."></textarea>
    <button onclick="transpileAndRun()">Transpile and Run</button>
    <h2>Python Output:</h2>
    <pre id="pythonOutput"></pre>
    <h2>Program Output:</h2>
    <pre id="programOutput"></pre>
    
    <script>
        function transpilePseudocodeToPython(pseudocode) {
            return pseudocode
                .replace(/OUTPUT\s+(.*)/g, "print(\$1)")
                .replace(/INPUT\s+(.+)/g, "\$1 = input()")
                .replace(/IF\s+(.*)\s+THEN/g, "if (\$1):")
                .replace(/ELSE/g, "else:")
                .replace(/ENDIF/g, "")
                .replace(/WHILE\s+(.*)\s+DO/g, "while (\$1):")
                .replace(/ENDWHILE/g, "")
                .replace(/FOR\s+(.*)\s+TO\s+(.*)\s+DO/g, "for \$1 in range(\$1, \$2 + 1):")
                .replace(/ENDFOR/g, "")
                .replace(/(\s*)BEGIN/g, "")
                .replace(/(\s*)END/g, "");
        }

        function transpilePseudocodeToJS(pseudocode) {
    return pseudocode
        .replace(/OUTPUT\s+(.*)/g, "console.log(\$1)")  // Replace OUTPUT with console.log()
        .replace(/INPUT\s+(.+)/g, "\$1 = prompt(\$1)")   // Replace INPUT with prompt()
        .replace(/IF\s+(.*)\s+THEN/g, "if (\$1) {")     // Replace IF THEN structure
        .replace(/ELSE/g, "else {")                    // Replace ELSE
        .replace(/ENDIF/g, "}")                        // Remove ENDIF
        .replace(/WHILE\s+(.*)\s+DO/g, "while (\$1) {") // Replace WHILE DO
        .replace(/ENDWHILE/g, "}")                     // Remove ENDWHILE
        .replace(/FOR\s+(.*)\s+TO\s+(.*)\s+DO/g, "for (let \$1 = \$1; \$1 <= \$2; \$1++) {") // FOR loop
        .replace(/ENDFOR/g, "}")                       // Remove ENDFOR
        .replace(/(\s*)BEGIN/g, "")                    // Remove BEGIN (optional)
        .replace(/(\s*)END/g, "");                     // Remove END (optional)
}

        function transpileAndRun() {
            const pseudocodeInput = document.getElementById("pseudocodeInput").value;
            const jsOutputElement = document.getElementById("jsOutput");
            const programOutputElement = document.getElementById("programOutput");

            try {
                const jsCode = transpilePseudocodeToPython(pseudocodeInput);
                pythonOutputElement.textContent = jsCode;
                executePythonCode(pythonCode, "programOutput");
            } catch (error) {
                programOutputElement.textContent = `Error: ${error.message}`;
            }
        }
    </script>
</body>
</html>